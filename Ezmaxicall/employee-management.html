<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <!--
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	-->
	<link rel="stylesheet" href="./assets/dist/bootstrap-4.3.1/css/bootstrap.min.css">
	
	<link rel="stylesheet" type="text/css" href="assets/css/navbar.css">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">

	<link href="./assets/dist/fontawesome-free-5.9.0-web/css/all.css" rel="stylesheet">
	
  		<title>Employee Management</title>
	

  </head>
<body>
	<header class="fixed-top ">
		<nav class="navbar container navbar-dark bg-header text-light">

	    <button class="navbar-toggler" type="button" data-toggle="offcanvas">
	      <span class="fas fa-bars"></span>
	    </button>

	    <div class="navbar-collapse offcanvas-collapse" id="navbarSupportedContent">
	      <button class="offcanvas-close" type="button" data-toggle="offcanvas-close">
	        ×
	      </button>
				<!-- MENU -->
	      <ul class="navbar-nav">
	        <li class="nav-item border-bottom border-primary active">
	          <a class="nav-link" href="./manage-store.html"><i class="fas fa-users pr-2"></i>Manage Store<span class="sr-only">(current)</span></a>
	        </li>
	        <li class="nav-item border-bottom border-primary">
	          <a class="nav-link" href="#"><i class="fas fa-dollar-sign pr-2"></i>Store Payment</a>
	        </li>
	        <li class="nav-item border-bottom border-primary">
	          <a class="nav-link" href="#"><i class="fas fa-dollar-sign pr-2"></i>Manage Discount Plan</a>
	        </li>
	        <li class="nav-item border-bottom border-primary accordion" id="accordion-menu" data-toggle="collapse" data-target="#collapse-menu">
	        	<a class="nav-link" href="#"><i class="fas fa-chart-bar pr-2"></i>Report</a>
	        	<!-- SUBMENU -->
	        	<ul id="collapse-menu" class="submenu navbar-nav collapse">
	        		<li class="nav-item border-bottom border-info">
	        			<a class="nav-link ml-2" href="#"><i class="fas fa-angle-right pr-2"></i>Distributor Transactions</a>
	        		</li>
	        		<li class="nav-item border-bottom border-info">
	        			<a class="nav-link ml-2" href="#"><i class="fas fa-angle-right pr-2"></i>Store Activity Report</a></li>
	        		<li class="nav-item border-bottom border-info">
	        			<a class="nav-link ml-2" href="#"><i class="fas fa-angle-right pr-2"></i>Distributor Commission Report</a></li>
	        		<li class="nav-item border-bottom border-info">
	        			<a class="nav-link ml-2" href="#"><i class="fas fa-angle-right pr-2"></i>Store Receivables</a>
	        		</li>
	        	</ul>
	        </li>
	        <li class="nav-item border-bottom border-primary">
	          <a class="nav-link" href="#"><i class="fas fa-chart-bar pr-2"></i>Employee</a>
	        </li>
	      </ul>

	    </div>
			
	    <a class="navbar-brand ml-3" href="dashboard.html">Ezmaxicall</a>
	    <button class="btn btn-logout rounded-0 ml-auto px-4"><i class="fas fa-power-off pr-2"></i>Logout</button>
	  </nav>

	</header>

	<!-- CONTAINER -->
	<main class="container">
		<h1 class="mb-5">Dashboard</h1>
		<div class="row">

			<div class="col-auto mb-3 ml-auto">
				<button id="btnAddEmployee" class="btn btn-secondary rounded float-right" data-count='1'><i class="fas fa-plus-circle mr-2"></i>Add Employee</button>
			</div>

			<div class="col-12">
				<table id="tableEmloyeeManagement" class="table table-striped table-bordered text-center">

				  <thead>
				    <tr class="table-secondary">
				      <th>User ID</th>
				      <th>Password</th>
				      <th>Edit</th>
				    </tr>
				  </thead>

				  <tbody>

				    <tr>
				      <td><input id="userID" data-saved="yes" class="input__name border-0 bg-transparent" type="text" value="nameuser" disabled></td>
				      <td><input id="userPasswordID" data-saved="yes" class="input__password border-0 bg-transparent" type="password" value="mypassword" disabled></td>
				      <td>
				      	<button id="editUserAndPasswordID" class="btn__editName "><i class="fas fa-edit"></i></button>
				      </td>
				    </tr>
				    <tr>
				      <td><input id="userID" data-saved="yes" class="input__name border-0 bg-transparent" type="text" value="nameuser" disabled></td>
				      <td><input id="userPasswordID" data-saved="yes" class="input__password border-0 bg-transparent" type="password" value="mypassword" disabled></td>
				      <td>
				      	<button id="editUserAndPasswordID" class="btn__editName "><i class="fas fa-edit"></i></button>
				      </td>
				    </tr>
				      <td><input id="userID" data-saved="yes" class="input__name border-0 bg-transparent" type="text" value="nameuser" disabled></td>
				      <td><input id="userPasswordID" data-saved="yes" class="input__password border-0 bg-transparent" type="password" value="mypassword" disabled></td>
				      <td>
				      	<button id="editUserAndPasswordID" class="btn__editName "><i class="fas fa-edit"></i></button>
				      </td>
				    </tr>
				  </tbody>

				</table>
			</div>

			<div id="btnPanel" class="col-auto mb-5 mx-auto d-none">
				<button type="submit" id="btnSave" class="btn__saveName btn btn-primary rounded px-4 mr-2">Save</button>
				<button type="submit" id="btnCancel" class="btn__cancelEdit btn btn-primary rounded px-4">Cancel</button>
			</div>

		</div>
	</main>









<script src="./assets/dist/jquery-3.4.1/jquery-3.4.1.min.js"></script>
<script src="./assets/dist/bootstrap-4.3.1/js/bootstrap.bundle.min.js"></script>
		

<script>
  $(function () {
    'use strict';

    $('[data-toggle="offcanvas"]').on('click', function () {
      $('.offcanvas-collapse').addClass('open');
      $('body').addClass('offcanvas-open');
    })
    $('[data-toggle="offcanvas-close"]').on('click', function () {
      $('.offcanvas-collapse').removeClass('open');
      $('body').removeClass('offcanvas-open');

    })
  })
</script>

<script>
	var body = $('body');

	$('#btnAddEmployee').click(function() {

		var count = parseInt($(this).attr('data-count'));
		var countUser = 1;
		var findInput =	$(this).parent().parent().find('.input__name[data-saved="no"]');
		if (findInput.data('saved') == 'no') {
			alert("Edit and save last added user for add new Employee");
		} else {
			$('#tableEmloyeeManagement tbody').append(`
				<tr>
		      <td><input id="userID" data-saved="no" class="input__name border-0 bg-transparent" type="text" value="user`+count+`" disabled></td>
		      <td><input id="userPasswordID" data-saved="no" class="input__password border-0 bg-transparent" type="password" value="newpassword`+count+`" disabled></td>
		      <td>
		      	<button id="editUserAndPasswordID" class="btn__editName "><i class="fas fa-edit"></i></button>
		      </td>
		    </tr>`);

			$(this).attr('data-count', count+1);
		}



	});
				var inputNameValueSave;
				var inputPasswordValueSave;
				var itemFromEdit;
				// редактировать
				body.on('click', '.btn__editName', function(e) {
					e.stopPropagation();
				  var item = $(this).parent().parent();
				  itemFromEdit = item;
 					var inputName = item.find('.input__name');
 					var inputPassword = item.find('.input__password');
			  	var btnEditName = item.parent().find('.btn__editName');
			  	var btnPanel = $('#btnPanel');

			    inputNameValueSave = inputName.val();
			    inputPasswordValueSave = inputPassword.val();

				  inputName.prop('disabled', false);
				  inputPassword.prop('disabled', false);
  				inputName.focus();

  				inputName.removeClass('bg-transparent');
  				inputPassword.removeClass('bg-transparent');

					btnEditName.addClass('d-none');
					btnPanel.removeClass('d-none');

				})
				// сохранить
				body.on('click', '.btn__saveName', function(e) {
					e.stopPropagation(); 
				  var item = itemFromEdit;
 					var inputName = item.find('.input__name');
 					var inputPassword = item.find('.input__password');
			  	var btnEditName = item.parent().find('.btn__editName');
			  	var btnPanel = $('#btnPanel');

			    inputName.attr('data-saved', 'yes');
			    inputPassword.attr('data-saved', 'yes');

			    // меняем value у полей на введенное
 					var inputNameValue = inputName.val();
 					var inputPasswordValue = inputPassword.val();

 					inputName.attr('value', inputNameValue);
 					inputPassword.attr('value', inputPasswordValue);

				  inputName.prop('disabled', true);
				  inputPassword.prop('disabled', true);

  				inputName.addClass('bg-transparent');
  				inputPassword.addClass('bg-transparent');
					btnEditName.removeClass('d-none');
					btnPanel.addClass('d-none');
				})

				body.on('click', '.btn__cancelEdit', function(e) {
					e.stopPropagation();
				  var item = itemFromEdit;
 					var inputName = item.find('.input__name');
 					var inputPassword = item.find('.input__password');
			  	var btnEditName = item.parent().find('.btn__editName');
			  	var btnPanel = $('#btnPanel');

			    if (inputName.attr('data-saved') === 'no') {
						item.closest('tr').remove();
			    }

			    inputName.attr('value', inputNameValueSave);
			    inputName.val(inputNameValueSave);
			    inputPassword.attr('value', inputPasswordValueSave);
			    inputPassword.val(inputPasswordValueSave);


				  inputName.prop('disabled', true);
				  inputName.addClass('bg-transparent');
					inputPassword.prop('disabled', true);
				  inputPassword.addClass('bg-transparent');


					btnEditName.removeClass('d-none');
					btnPanel.addClass('d-none');

					// btnDeleteRow.removeClass('d-none');
				})

</script>


  </body>
</html>